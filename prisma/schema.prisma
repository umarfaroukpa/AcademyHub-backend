generator client {
provider = "prisma-client-js"
}


datasource db {
provider = "postgresql"
url = env("DATABASE_URL")
}


model User {
id String @id @default(uuid())
email String @unique
password String
fullName String?
role Role @default(STUDENT)
createdAt DateTime @default(now())
courses Course[] @relation("owner_courses")
}


model Department {
id String @id @default(uuid())
name String
courses Course[]
}


model Course {
id String @id @default(uuid())
code String
title String
description String?
syllabus Json?
department Department? @relation(fields: [departmentId], references: [id])
departmentId String?
owner User? @relation("owner_courses", fields: [ownerId], references: [id])
ownerId String?
lifecycle Lifecycle @default(DRAFT)
createdAt DateTime @default(now())
updatedAt DateTime @updatedAt
}


enum Role {
ADMIN
LECTURERS
STUDENT
}


enum Lifecycle {
DRAFT
PENDING_REVIEW
PUBLISHED
ARCHIVED
}